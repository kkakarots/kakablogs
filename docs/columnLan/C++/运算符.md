# 运算符

### 移位运算符

<img src="./images/移位运算符.png" style="margin: 2px auto; max-width: 100%;">

:::info eg
左移位 `<<`
``` C++
int a = 5; // 00000000000000000000000000000101
int b = 2; // 00000000000000000000000000000010

a << b; // 00000000000000000000000000010100
// Expected output: 20
```
右移位 `>>`
``` C++
int a = 5; //  00000000000000000000000000000101
int b = 2; //  00000000000000000000000000000010
int c = -5; //  11111111111111111111111111111011

a >> b; //  00000000000000000000000000000001
// Expected output: 1
c >> b; //  11111111111111111111111111111110
// Expected output: -2
```
**用处之一: 计算中间值**

这种计算中间值的方法有两个好处：
- 避免溢出：在处理大整数时，直接计算 (left + right) / 2 可能会导致溢出，而通过 ((right - left) >> 1) + left 的方法则避免了这种情况。
- 精确度：确保计算出的中间值更加精确，尤其是在一些特殊情况下。
``` C++
int mid = ((right - left) >> 1) + left;
```


:::

### 递增和递减运算符

递增运算符(++)和递减运算符(--)为对象的加1和减1操作提供了一种简洁的书
写形式。这两个运算符还可应用于迭代器，因为很多迭代器本身不支持算术运算，所以此
时递增和递减运算符除了书写简洁外还是必须的。

递增和递减运算符有两种形式:前置版本和后置版本。到目前为止，本书使用的都是
前置版本，这种形式的运算符首先将运算对象加1(或减1)，然后将改变后的对象作为求
值结果。后置版本也会将运算对象加1(或减1)，但是求值结果是运算对象改变之前那个
值的副本:
``` C++
int i=0，j;
i= ++i;
j= i++;
//j=1，i-1:前置版本得到递增之后的值
//j=1，i=2:后置版本得到递增之前的值
```

这两种运算符必须作用于左值运算对象。前置版本将对象本身作为左值返回，后置版本则
将对象原始值的副本作为右值返回。

:::tip 建议:除非必须，否则不用递增递减运算符的后置版本

有C语言背景的读者可能对优先使用前置版本递增运算符有所疑问，其实原因非常
简单:前置版本的递增运算符避免了不必要的工作，它把值加1后直接返回改变了的运
算对象。与之相比，后置版本需要将原始值存储下来以便于返回这个未修改的内容。如
果我们不需要修改前的值，那么后置版本的操作就是一种浪费。

对于整数和指针类型来说，编译器可能对这种额外的工作进行一定的优化;但是对
于相对复杂的选代器类型，这种额外的工作就消耗巨大了。建议养成使用前置版本的习
惯,这样不仅不需要担心性能的问题,而且更重要的是写出的代码会更符合编程的初衷。

:::